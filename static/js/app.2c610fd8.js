(function(){"use strict";var e={172:function(e,t,s){var i=s(3751),o=s(5615),a=s(641);function n(e,t,s,i,o,n){const l=(0,a.g2)("SearchBooks");return(0,a.uX)(),(0,a.Wv)(l)}var l=s(33);const r={class:"search_container"},c={class:"search_button_div"},u={class:"searchbar"},h=["placeholder"],d={key:0,class:"media_list"},g={class:"media_list_ul"},k=["src"],p=["src"],m={class:"sub_media_list"},_={key:0,class:"sub_media_list_ul"},b={key:0,class:"genre_list"},v={key:1,class:"genre_list"},f={key:1,class:"sub_media_list_ul"},M={class:"book_title"},L={key:0,class:"genre_list"},y={key:1,class:"genre_list"},C=["onClick"],P={class:"pagination_control"},w=["disabled"],F=["disabled"],E=["disabled"],B=["disabled"],X=["disabled"],I=["disabled"],T={key:1,class:"chosen_media"},A=["src"],W={class:"chosen_media_info"},S={key:0,class:"chosen_genre_list"},V={class:"overview"},D={key:2,class:"chosen_media"},G=["src"],N={class:"chosen_media_info"},O={class:"authors"},Q={style:{fontWeight:"900"}},x={key:0,class:"chosen_genre_list"},j={class:"overview"};function q(e,t,s,o,n,q){const K=(0,a.g2)("RecommendModal");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("form",{onSubmit:t[7]||(t[7]=(0,i.D$)((()=>{}),["prevent"])),class:"search"},[(0,a.Lk)("div",c,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>q.toggleMedia("Book")),class:(0,l.C4)([{active:"Book"===n.searchMedia},"book_button"])}," Books",2),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>q.toggleMedia("Movie")),class:(0,l.C4)([{active:"Movie"===n.searchMedia},"movie_button"])}," Movies ",2),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>q.toggleMedia("TV Show")),class:(0,l.C4)([{active:"TV Show"===n.searchMedia},"show_button"])}," TV Shows ",2)]),(0,a.Lk)("div",u,[(0,a.bo)((0,a.Lk)("input",{type:"text",placeholder:"Search "+n.searchMedia,"onUpdate:modelValue":t[3]||(t[3]=e=>n.query=e),onInput:t[4]||(t[4]=e=>q.search(!0))},null,40,h),[[i.Jo,n.query]]),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>q.clearQuery&&q.clearQuery(...e)),class:"clear_button"},"Ã—")]),(0,a.Lk)("button",{class:"rcmnd-button",onClick:t[6]||(t[6]=e=>q.recommendBooks(n.chosenMedia))},"Recommend Books")],32),(0,a.bF)(K,{isVisible:n.isModalVisible,"onUpdate:isVisible":t[8]||(t[8]=e=>n.isModalVisible=e),recommendedBooks:n.rcmndBooks,mediaType:n.searchMedia,mediaName:n.query,onClose:t[9]||(t[9]=e=>n.isModalVisible=!1)},null,8,["isVisible","recommendedBooks","mediaType","mediaName"]),n.mediaList.length>0?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("ul",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.mediaList,(e=>((0,a.uX)(),(0,a.CE)("li",{class:"media_list_li",key:e.id},["Movie"==this.searchMedia||"TV Show"==this.searchMedia?((0,a.uX)(),(0,a.CE)("img",{key:0,src:"https://image.tmdb.org/t/p/original/"+e.poster_path,alt:"Movie poster",class:"list_img"},null,8,k)):(0,a.Q3)("",!0),"Book"==this.searchMedia?((0,a.uX)(),(0,a.CE)("img",{key:1,src:e.volumeInfo?.imageLinks?.thumbnail,class:"list_img"},null,8,p)):(0,a.Q3)("",!0),(0,a.Lk)("div",m,["Movie"==this.searchMedia||"TV Show"==this.searchMedia?((0,a.uX)(),(0,a.CE)("ul",_,[(0,a.Lk)("li",null,[t[16]||(t[16]=(0,a.Lk)("b",null,"Title: ",-1)),(0,a.eW)((0,l.v_)(e.title||e.name),1)]),(0,a.Lk)("li",null,[t[17]||(t[17]=(0,a.Lk)("b",null,"Released: ",-1)),(0,a.eW)((0,l.v_)(e.release_date||e.first_air_date||"Not specified"),1)]),t[19]||(t[19]=(0,a.Lk)("li",null,[(0,a.Lk)("b",null,"Genres: ")],-1)),e.genre_ids?.length>0?((0,a.uX)(),(0,a.CE)("ul",b,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.genre_ids,(e=>((0,a.uX)(),(0,a.CE)("li",{class:"genre",key:e,style:(0,l.Tr)({backgroundColor:q.getGenreColor(e)})},(0,l.v_)(q.getGenreName(e)),5)))),128))])):((0,a.uX)(),(0,a.CE)("ul",v,t[18]||(t[18]=[(0,a.Lk)("li",{class:"genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])):"Book"==this.searchMedia?((0,a.uX)(),(0,a.CE)("ul",f,[(0,a.Lk)("li",M,[t[20]||(t[20]=(0,a.Lk)("b",null,"Title: ",-1)),(0,a.eW)((0,l.v_)(e.volumeInfo["title"]),1)]),(0,a.Lk)("li",null,[t[21]||(t[21]=(0,a.Lk)("b",null,"Published: ",-1)),(0,a.eW)((0,l.v_)(e.volumeInfo["publishedDate"]||"Not specified"),1)]),t[23]||(t[23]=(0,a.Lk)("li",null,[(0,a.Lk)("b",null,"Categories: ")],-1)),e.volumeInfo?.categories?.length>0?((0,a.uX)(),(0,a.CE)("ul",L,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.volumeInfo["categories"],(e=>((0,a.uX)(),(0,a.CE)("li",{class:"genre",style:{"background-color":"grey"},key:e},(0,l.v_)(e),1)))),128))])):((0,a.uX)(),(0,a.CE)("ul",y,t[22]||(t[22]=[(0,a.Lk)("li",{class:"genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t=>q.select(e),class:"media_list_button"}," Select ",8,C)])])))),128))]),(0,a.Lk)("li",P,[(0,a.Lk)("button",{class:"pagination_control_button_next_prev",disabled:1==this.currentPage,onClick:t[10]||(t[10]=(...e)=>q.prevPage&&q.prevPage(...e))},"<",8,w),(0,a.Lk)("button",{class:"pagination_control_button_page",style:(0,l.Tr)({backgroundColor:this.currentPage==q.page1?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==q.page1?"bold":""}),disabled:q.page1>n.totalPages,onClick:t[11]||(t[11]=e=>q.changePage(q.page1))},(0,l.v_)(q.page1),13,F),(0,a.Lk)("button",{class:"pagination_control_button_page",style:(0,l.Tr)({backgroundColor:this.currentPage==q.page2?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==q.page2?"bold":""}),disabled:q.page2>n.totalPages,onClick:t[12]||(t[12]=e=>q.changePage(q.page2))},(0,l.v_)(q.page2),13,E),(0,a.Lk)("button",{class:"pagination_control_button_page",style:(0,l.Tr)({backgroundColor:this.currentPage==q.page3?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==q.page3?"bold":""}),disabled:q.page3>n.totalPages,onClick:t[13]||(t[13]=e=>q.changePage(q.page3))},(0,l.v_)(q.page3),13,B),(0,a.Lk)("button",{class:"pagination_control_button_page",style:(0,l.Tr)({backgroundColor:this.currentPage==q.page4?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==q.page4?"bold":""}),disabled:q.page4>n.totalPages,onClick:t[14]||(t[14]=e=>q.changePage(q.page4))},(0,l.v_)(q.page4),13,X),(0,a.Lk)("button",{class:"pagination_control_button_next_prev",disabled:this.currentPage>=n.totalPages,onClick:t[15]||(t[15]=(...e)=>q.nextPage&&q.nextPage(...e))},">",8,I)])])):(0,a.Q3)("",!0),1!=this.show_ChosenMedia||"Movie"!=this.searchMedia&&"TV Show"!=this.searchMedia?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",T,[(0,a.Lk)("img",{class:"chosen_media_img",src:"https://image.tmdb.org/t/p/original/"+n.chosenMedia.poster_path,alt:"Movie poster"},null,8,A),(0,a.Lk)("div",W,[(0,a.Lk)("p",null,[t[24]||(t[24]=(0,a.Lk)("b",null,"Title: ",-1)),(0,a.eW)((0,l.v_)(n.chosenMedia.title||n.chosenMedia.name),1)]),(0,a.Lk)("p",null,[t[25]||(t[25]=(0,a.Lk)("b",null,"Released: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.chosenMedia.release_date||n.chosenMedia.first_air_date),1)]),n.chosenMedia?.genre_ids?.length>0?((0,a.uX)(),(0,a.CE)("ul",S,[t[26]||(t[26]=(0,a.Lk)("p",null,[(0,a.Lk)("b",null,"Genres: ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.chosenMedia.genre_ids,(e=>((0,a.uX)(),(0,a.CE)("li",{class:"chosen_genre",style:(0,l.Tr)({backgroundColor:q.getGenreColor(e)}),key:e},(0,l.v_)(q.getGenreName(e)),5)))),128))])):(0,a.Q3)("",!0),(0,a.Lk)("p",V,[t[27]||(t[27]=(0,a.Lk)("b",null,"Overview: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.chosenMedia.overview),1)])])])),1==this.show_ChosenMedia&&"Book"==this.searchMedia?((0,a.uX)(),(0,a.CE)("div",D,[(0,a.Lk)("img",{class:"chosen_media_img",src:n.chosenMedia.volumeInfo?.imageLinks?.thumbnail,alt:"Movie poster"},null,8,G),(0,a.Lk)("div",N,[(0,a.Lk)("p",null,[t[28]||(t[28]=(0,a.Lk)("b",null,"Title: ",-1)),(0,a.eW)((0,l.v_)(n.chosenMedia.volumeInfo["title"]),1)]),(0,a.Lk)("ul",O,[t[29]||(t[29]=(0,a.Lk)("p",null,[(0,a.Lk)("b",null,"Authors: ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.chosenMedia.volumeInfo?.authors,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t},[(0,a.Lk)("span",Q,(0,l.v_)(e.charAt(0)),1),(0,a.eW)((0,l.v_)(e.slice(1)),1)])))),128))]),(0,a.Lk)("p",null,[t[30]||(t[30]=(0,a.Lk)("b",null,"Published Date: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.chosenMedia.volumeInfo["publishedDate"]||"Not specified"),1)]),n.chosenMedia.volumeInfo?.categories?.length>0?((0,a.uX)(),(0,a.CE)("ul",x,[t[31]||(t[31]=(0,a.Lk)("p",null,[(0,a.Lk)("b",null,"Categories: ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.chosenMedia.volumeInfo["categories"],(e=>((0,a.uX)(),(0,a.CE)("li",{class:"chosen_genre",style:{"background-color":"grey"},key:e},(0,l.v_)(e),1)))),128))])):(0,a.Q3)("",!0),(0,a.Lk)("p",j,[t[32]||(t[32]=(0,a.Lk)("b",null,"Description: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.chosenMedia.volumeInfo["description"]),1)])])])):(0,a.Q3)("",!0)])}s(4114),s(4603),s(7566),s(8721);const K=(0,o.nY)("genre",{state:()=>({genreMap:{12:["Adventure","#FFD700"],14:["Fantasy","#8A2BE2"],16:["Animation","#FAA916"],18:["Drama","#1B1F1A"],27:["Horror","#8B0000"],28:["Action","#FF0000"],35:["Comedy","#FF8C00"],36:["History","#808000"],37:["Western","#D2691E"],53:["Thriller","#000080"],80:["Crime","#A9A9A9"],99:["Documentary","#3289D1"],878:["Science Fiction","#228B22"],9648:["Mystery","#800080"],10402:["Music","#FF1493"],10749:["Romance","#FF69B4"],10751:["Family","#DAA520"],10752:["War","#B22222"],10759:["Action & Adventure","#D2B48C"],10762:["Kids","#00BFFF"],10763:["News","#4682B4"],10764:["Reality","#FF4500"],10765:["Sci-Fi & Fantasy","#3A2C8D"],10766:["Soap","#E6A8D7"],10767:["Talk","#808080"],10768:["War & Politics","#556B2F"],10770:["TV Movie","#C71585"]}}),getters:{getGenreById:e=>t=>{const s=e.genreMap[t];return s?s[0]:"Unknown"},getGenreColorById:e=>t=>{const s=e.genreMap[t];return s?s[1]:"#FFFFFF"}}}),R={key:0,class:"modal-container"},$={class:"modal"},U={class:"modal-header"},H={class:"list-container"},J=["src"],Y={class:"books_li_container"},z={class:"books_li_div"},Z={class:"book_div_title"},ee={class:"books_li_authors"},te={style:{fontWeight:"900"}},se={class:"books_li_categories"},ie={key:0,class:"category_ul"},oe={key:1};function ae(e,t,s,i,o,n){return s.isVisible?((0,a.uX)(),(0,a.CE)("div",R,[(0,a.Lk)("div",$,[(0,a.Lk)("div",U,[(0,a.Lk)("p",null,"Recommended books for: "+(0,l.v_)(s.mediaType)+" - "+(0,l.v_)(s.mediaName),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.close&&n.close(...e)),class:"close-button"},"Close")]),(0,a.Lk)("ul",H,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.recommendedBooks,(e=>((0,a.uX)(),(0,a.CE)("li",{class:"books_li",key:e.title},[(0,a.Lk)("img",{src:e.image,class:"book_image"},null,8,J),(0,a.Lk)("div",Y,[(0,a.Lk)("div",z,[(0,a.Lk)("p",Z,[t[1]||(t[1]=(0,a.Lk)("b",null,"Title: ",-1)),(0,a.eW)((0,l.v_)(e.title),1)]),(0,a.Lk)("p",null,[t[2]||(t[2]=(0,a.Lk)("b",null,"Published: ",-1)),(0,a.eW)((0,l.v_)(e.published_date),1)]),(0,a.Lk)("div",ee,[t[3]||(t[3]=(0,a.Lk)("p",null,[(0,a.Lk)("b",null,"Authors: ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.authors,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{style:{"padding-right":"0.3rem"},key:t},[(0,a.Lk)("span",te,(0,l.v_)(e.charAt(0)),1),(0,a.eW)((0,l.v_)(e.slice(1)),1)])))),128))]),(0,a.Lk)("div",se,[t[5]||(t[5]=(0,a.Lk)("p",null,[(0,a.Lk)("b",null,"Categories:")],-1)),e.categories.length>0?((0,a.uX)(),(0,a.CE)("ul",ie,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.categories,(e=>((0,a.uX)(),(0,a.CE)("li",{class:"rcmnd_genre",style:{"background-color":"darkblue"},key:e},(0,l.v_)(e),1)))),128))])):((0,a.uX)(),(0,a.CE)("ul",oe,t[4]||(t[4]=[(0,a.Lk)("li",{style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])]),t[6]||(t[6]=(0,a.Lk)("button",{class:"more_info"},"More info",-1))])])))),128))])])])):(0,a.Q3)("",!0)}var ne={props:["recommendedBooks","isVisible","mediaType","mediaName"],methods:{close(){this.$emit("update:isVisible",!1)}}},le=s(6262);const re=(0,le.A)(ne,[["render",ae]]);var ce=re,ue={components:{RecommendModal:ce},data(){return{query:"",mediaList:[],searchMedia:"Movie",show_ChosenMedia:!1,chosenMedia:null,currentPage:1,totalPages:1,showPageMultiplier:1,isModalVisible:!1,rcmndBooks:[]}},computed:{genreStore(){return K()},page1(){return 4*this.showPageMultiplier-3},page2(){return 4*this.showPageMultiplier-2},page3(){return 4*this.showPageMultiplier-1},page4(){return 4*this.showPageMultiplier}},methods:{async search(e){if(!(this.query.length<2))if(this.show_ChosenMedia=!1,this.chosenMedia=null,1==e&&(this.currentPage=1,this.showPageMultiplier=1),"Movie"==this.searchMedia)try{const e=await fetch(`http://127.0.0.1:8000/search-movie/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();this.mediaList=t.movies||[],this.currentPage=t.current_page||1,this.totalPages=t.total_pages||1}catch(t){console.error("error catching data",t)}else if("TV Show"==this.searchMedia)try{const e=await fetch(`http://127.0.0.1:8000/search-show/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();this.mediaList=t.shows||[],this.currentPage=t.current_page||1,this.totalPages=t.total_pages||1}catch(t){console.error("error catching data",t)}else if("Book"==this.searchMedia)try{const e=await fetch(`http://127.0.0.1:8000/search-book/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();this.mediaList=t.books||[],this.currentPage=t.current_page||1,this.totalPages=t.total_pages||1,console.log(t)}catch(t){console.error("error catching data",t)}},async recommendBooks(e){let t=new Map,s=[];if(null==e)return void alert("Select a media in order to get book recommendations.");if("Movie"==this.searchMedia||"TV Show"==this.searchMedia){for(let t=0;t<e.genre_ids.length;t++)s.push(this.getGenreName(e.genre_ids[t]));t.set("title",e.title||e.name),t.set("description",e.overview),t.set("genre",s)}else"Book"==this.searchMedia&&(t.set("title",e.volumeInfo["title"]),t.set("description",e.volumeInfo["description"]),t.set("genre",e.volumeInfo["categories"]));let i=new URLSearchParams(t),o="http://127.0.0.1:8000/get-recommendations/?"+i.toString();try{const e=await fetch(o);if(!e.ok)throw new Error("Failed to fecth recommendations");const t=await e.json();this.rcmndBooks=t.recommendations||[],this.openModal()}catch(a){console.error("Error fecthing recommendations ",a)}},openModal(){this.isModalVisible=!0},toggleMedia(e){this.currentPage=1,this.showPageMultiplier=1,this.show_ChosenMedia=!1,this.searchMedia=e,this.mediaList=[],this.search(!0)},clearQuery(){this.currentPage=1,this.query="",this.mediaList=[],this.chosenMedia=null,this.show_ChosenMedia=!1},select(e){this.show_ChosenMedia=!0,this.chosenMedia=e,this.mediaList=[],this.query=e.title||e.name||e.volumeInfo["title"],this.currentPage=1},getGenreName(e){return this.genreStore.getGenreById(e)},getGenreColor(e){return this.genreStore.getGenreColorById(e)},changePage(e){this.currentPage=e,this.search(!1)},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.currentPage>this.page4&&this.showPageMultiplier++,this.search(!1))},prevPage(){this.page1==this.currentPage?(this.showPageMultiplier--,this.changePage(this.page4)):this.changePage(Number(this.currentPage)-1),this.search(!1)}}};const he=(0,le.A)(ue,[["render",q]]);var de=he,ge={name:"App",components:{SearchBooks:de}};const ke=(0,le.A)(ge,[["render",n]]);var pe=ke;const me=(0,i.Ef)(pe),_e=(0,o.Ey)();me.use(_e),me.mount("#app")}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,a){if(!i){var n=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],a=e[u][2];for(var l=!0,r=0;r<i.length;r++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(l=!1,a<n&&(n=a));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[i,o,a]}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,n=i[0],l=i[1],r=i[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(r)var u=r(s)}for(t&&t(i);c<n.length;c++)a=n[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},i=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(172)}));i=s.O(i)})();
//# sourceMappingURL=app.2c610fd8.js.map