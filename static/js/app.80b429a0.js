(function(){"use strict";var e={591:function(e,s,o){var a=o(3751),t=o(5615),n=o(641);function r(e,s,o,a,t,r){const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(l)}var l={name:"App"},i=o(6262);const c=(0,i.A)(l,[["render",r]]);var d=c,u=o(5220),h=o(33);const k={class:"search_container"},_={class:"search_button_div"},g={class:"searchbar"},p=["placeholder"],b={key:0,class:"media_list"},w={class:"media_list_ul"},m=["src"],v=["src"],L={class:"sub_media_list"},f={key:0,class:"sub_media_list_ul"},y={key:0,class:"genre_list"},C={key:1,class:"genre_list"},P={key:1,class:"sub_media_list_ul"},E={class:"book_title"},F={key:0,class:"genre_list"},M={key:1,class:"genre_list"},B=["onClick"],X={class:"pagination_control"},T=["disabled"],O=["disabled"],I=["disabled"],N=["disabled"],S=["disabled"],A=["disabled"],D={key:1,class:"chosen_media"},U=["src"],W={class:"chosen_media_info"},G={key:0,class:"chosen_genre_list"},x={class:"overview"},Q={key:2,class:"chosen_media"},V=["src"],j={class:"chosen_media_info"},K={class:"authors"},R={style:{fontWeight:"900"}},$={key:0,class:"chosen_genre_list"},J={key:1,class:"chosen_genre_list"},q={class:"overview"};function H(e,s,o,t,r,l){const i=(0,n.g2)("RecommendModal");return(0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("form",{onSubmit:s[8]||(s[8]=(0,a.D$)((()=>{}),["prevent"])),class:"search"},[(0,n.Lk)("div",_,[(0,n.Lk)("button",{onClick:s[0]||(s[0]=e=>l.toggleMedia("Books")),class:(0,h.C4)([{active:"Books"===r.searchMedia},"book_button"])}," Books",2),(0,n.Lk)("button",{onClick:s[1]||(s[1]=e=>l.toggleMedia("Movies")),class:(0,h.C4)([{active:"Movies"===r.searchMedia},"movie_button"])}," Movies ",2),(0,n.Lk)("button",{onClick:s[2]||(s[2]=e=>l.toggleMedia("TV Shows")),class:(0,h.C4)([{active:"TV Shows"===r.searchMedia},"show_button"])}," TV Shows ",2)]),(0,n.Lk)("div",g,[(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"Search "+r.searchMedia+" - Trending "+r.searchMedia,"onUpdate:modelValue":s[3]||(s[3]=e=>r.query=e),onInput:s[4]||(s[4]=e=>l.search(!0))},null,40,p),[[a.Jo,r.query]]),(0,n.Lk)("button",{onClick:s[5]||(s[5]=(...e)=>l.clearQuery&&l.clearQuery(...e)),class:"clear_button"},"Ã—")]),(0,n.Lk)("button",{class:"rcmnd-button",onClick:s[6]||(s[6]=e=>l.recommendBooks(r.chosenMedia))},"Recommend Books"),(0,n.Lk)("button",{class:"login-btn",onClick:s[7]||(s[7]=(...e)=>l.redirectToLogin&&l.redirectToLogin(...e))},"Login")],32),(0,n.bF)(i,{isVisible:r.isModalVisible,"onUpdate:isVisible":s[9]||(s[9]=e=>r.isModalVisible=e),recommendedBooks:r.rcmndBooks,mediaType:r.searchMedia,mediaName:r.query,onClose:s[10]||(s[10]=e=>r.isModalVisible=!1)},null,8,["isVisible","recommendedBooks","mediaType","mediaName"]),r.mediaList.length>0?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("ul",w,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.mediaList,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"media_list_li",key:e.id},["Movies"==this.searchMedia||"TV Shows"==this.searchMedia?((0,n.uX)(),(0,n.CE)("img",{key:0,src:"https://image.tmdb.org/t/p/original/"+e.poster_path,alt:"Movie poster",class:"list_img"},null,8,m)):(0,n.Q3)("",!0),"Books"==this.searchMedia?((0,n.uX)(),(0,n.CE)("img",{key:1,src:e.volumeInfo?.imageLinks?.thumbnail,class:"list_img"},null,8,v)):(0,n.Q3)("",!0),(0,n.Lk)("div",L,["Movies"==this.searchMedia||"TV Shows"==this.searchMedia?((0,n.uX)(),(0,n.CE)("ul",f,[(0,n.Lk)("li",null,[s[17]||(s[17]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(e.title||e.name),1)]),(0,n.Lk)("li",null,[s[18]||(s[18]=(0,n.Lk)("b",null,"Released: ",-1)),(0,n.eW)((0,h.v_)(e.release_date||e.first_air_date||"Not specified"),1)]),s[20]||(s[20]=(0,n.Lk)("li",null,[(0,n.Lk)("b",null,"Genres: ")],-1)),e.genre_ids?.length>0?((0,n.uX)(),(0,n.CE)("ul",y,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.genre_ids,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"genre",key:e,style:(0,h.Tr)({backgroundColor:l.getGenreColor(e)})},(0,h.v_)(l.getGenreName(e)),5)))),128))])):((0,n.uX)(),(0,n.CE)("ul",C,s[19]||(s[19]=[(0,n.Lk)("li",{class:"genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])):"Books"==this.searchMedia?((0,n.uX)(),(0,n.CE)("ul",P,[(0,n.Lk)("li",E,[s[21]||(s[21]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(e?.volumeInfo?.title||"No title available"),1)]),(0,n.Lk)("li",null,[s[22]||(s[22]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,h.v_)(e?.volumeInfo?.publishedDate||"Not specified"),1)]),s[24]||(s[24]=(0,n.Lk)("li",null,[(0,n.Lk)("b",null,"Categories: ")],-1)),e.volumeInfo?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",F,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.volumeInfo["categories"],(e=>((0,n.uX)(),(0,n.CE)("li",{class:"genre",style:{"background-color":"grey"},key:e},(0,h.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",M,s[23]||(s[23]=[(0,n.Lk)("li",{class:"genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:s=>l.select(e),class:"media_list_button"}," Select ",8,B)])])))),128))]),(0,n.Lk)("li",X,[(0,n.Lk)("button",{class:"pagination_control_button_next_prev",disabled:1==this.currentPage,onClick:s[11]||(s[11]=(...e)=>l.prevPage&&l.prevPage(...e))},"<",8,T),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,h.Tr)({backgroundColor:this.currentPage==l.page1?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==l.page1?"bold":""}),disabled:l.page1>r.totalPages,onClick:s[12]||(s[12]=e=>l.changePage(l.page1))},(0,h.v_)(l.page1),13,O),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,h.Tr)({backgroundColor:this.currentPage==l.page2?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==l.page2?"bold":""}),disabled:l.page2>r.totalPages,onClick:s[13]||(s[13]=e=>l.changePage(l.page2))},(0,h.v_)(l.page2),13,I),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,h.Tr)({backgroundColor:this.currentPage==l.page3?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==l.page3?"bold":""}),disabled:l.page3>r.totalPages,onClick:s[14]||(s[14]=e=>l.changePage(l.page3))},(0,h.v_)(l.page3),13,N),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,h.Tr)({backgroundColor:this.currentPage==l.page4?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==l.page4?"bold":""}),disabled:l.page4>r.totalPages,onClick:s[15]||(s[15]=e=>l.changePage(l.page4))},(0,h.v_)(l.page4),13,S),(0,n.Lk)("button",{class:"pagination_control_button_next_prev",disabled:this.currentPage>=r.totalPages,onClick:s[16]||(s[16]=(...e)=>l.nextPage&&l.nextPage(...e))},">",8,A)])])):(0,n.Q3)("",!0),1!=this.show_ChosenMedia||"Movies"!=this.searchMedia&&"TV Shows"!=this.searchMedia?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",D,[(0,n.Lk)("img",{class:"chosen_media_img",src:"https://image.tmdb.org/t/p/original/"+r.chosenMedia.poster_path,alt:"Movie poster"},null,8,U),(0,n.Lk)("div",W,[(0,n.Lk)("p",null,[s[25]||(s[25]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(r.chosenMedia.title||r.chosenMedia.name),1)]),(0,n.Lk)("p",null,[s[26]||(s[26]=(0,n.Lk)("b",null,"Released: ",-1)),(0,n.eW)(" "+(0,h.v_)(r.chosenMedia.release_date||r.chosenMedia.first_air_date),1)]),r.chosenMedia?.genre_ids?.length>0?((0,n.uX)(),(0,n.CE)("ul",G,[s[27]||(s[27]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Genres: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosenMedia.genre_ids,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"chosen_genre",style:(0,h.Tr)({backgroundColor:l.getGenreColor(e)}),key:e},(0,h.v_)(l.getGenreName(e)),5)))),128))])):(0,n.Q3)("",!0),(0,n.Lk)("p",x,[s[28]||(s[28]=(0,n.Lk)("b",null,"Overview: ",-1)),(0,n.eW)(" "+(0,h.v_)(r.chosenMedia.overview),1)])])])),1==this.show_ChosenMedia&&"Books"==this.searchMedia?((0,n.uX)(),(0,n.CE)("div",Q,[(0,n.Lk)("img",{class:"chosen_media_img",src:r.chosenMedia.volumeInfo?.imageLinks?.thumbnail,alt:"Movie poster"},null,8,V),(0,n.Lk)("div",j,[(0,n.Lk)("p",null,[s[29]||(s[29]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(r.chosenMedia.volumeInfo["title"]),1)]),(0,n.Lk)("ul",K,[s[30]||(s[30]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosenMedia.volumeInfo?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{key:s},[(0,n.Lk)("span",R,(0,h.v_)(e.charAt(0)),1),(0,n.eW)((0,h.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("p",null,[s[31]||(s[31]=(0,n.Lk)("b",null,"Published Date: ",-1)),(0,n.eW)(" "+(0,h.v_)(r.chosenMedia.volumeInfo["publishedDate"]||"Not specified"),1)]),r.chosenMedia.volumeInfo?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",$,[s[32]||(s[32]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosenMedia.volumeInfo["categories"],(e=>((0,n.uX)(),(0,n.CE)("li",{class:"chosen_genre",style:{"background-color":"grey"},key:e},(0,h.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",J,s[33]||(s[33]=[(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1),(0,n.Lk)("li",{class:"chosen_genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)]))),(0,n.Lk)("p",q,[s[34]||(s[34]=(0,n.Lk)("b",null,"Description: ",-1)),(0,n.eW)(" "+(0,h.v_)(r.chosenMedia.volumeInfo["description"]),1)])])])):(0,n.Q3)("",!0)])}o(4114),o(4603),o(7566),o(8721);const Y=(0,t.nY)("genre",{state:()=>({genreMap:{12:["Adventure","#FFD700"],14:["Fantasy","#8A2BE2"],16:["Animation","#FAA916"],18:["Drama","#1B1F1A"],27:["Horror","#8B0000"],28:["Action","#FF0000"],35:["Comedy","#FF8C00"],36:["History","#808000"],37:["Western","#D2691E"],53:["Thriller","#000080"],80:["Crime","#A9A9A9"],99:["Documentary","#3289D1"],878:["Science Fiction","#228B22"],9648:["Mystery","#800080"],10402:["Music","#FF1493"],10749:["Romance","#FF69B4"],10751:["Family","#DAA520"],10752:["War","#B22222"],10759:["Action & Adventure","#D2B48C"],10762:["Kids","#00BFFF"],10763:["News","#4682B4"],10764:["Reality","#FF4500"],10765:["Sci-Fi & Fantasy","#3A2C8D"],10766:["Soap","#E6A8D7"],10767:["Talk","#808080"],10768:["War & Politics","#556B2F"],10770:["TV Movie","#C71585"]}}),getters:{getGenreById:e=>s=>{const o=e.genreMap[s];return o?o[0]:"Unknown"},getGenreColorById:e=>s=>{const o=e.genreMap[s];return o?o[1]:"#FFFFFF"}}}),z={key:0,class:"modal-container"},Z={class:"modal"},ee={class:"modal-header"},se={key:0,class:"list-container"},oe={key:0,class:"loading"},ae=["src"],te={class:"books_li_container"},ne={class:"books_li_div"},re={class:"book_div_title"},le={class:"books_li_authors"},ie={style:{fontWeight:"900"}},ce={class:"books_li_categories"},de={key:0,class:"category_ul"},ue={key:1},he=["onClick"],ke={key:1,class:"chosen_book_div"},_e={class:"chosen_book_container"},ge=["src"],pe={class:"chosen_book_div1"},be={class:"chosen_book_authors"},we={style:{fontWeight:"900"}},me={key:0,class:"chosen_genre_list"},ve={key:1,class:"chosen_genre_list"};function Le(e,s,o,a,t,r){return o.isVisible?((0,n.uX)(),(0,n.CE)("div",z,[(0,n.Lk)("div",Z,[(0,n.Lk)("div",ee,[(0,n.Lk)("p",null,"Recommended books for: "+(0,h.v_)(o.mediaType)+" - "+(0,h.v_)(o.mediaName),1),(0,n.Lk)("div",null,[0==t.show_list?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:s[0]||(s[0]=(...e)=>r.back&&r.back(...e)),class:"back"},"Back")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>r.close&&r.close(...e)),class:"close-button"},"Close")])]),t.show_list?((0,n.uX)(),(0,n.CE)("ul",se,[0==o.recommendedBooks.length?((0,n.uX)(),(0,n.CE)("li",oe," Loading...")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.recommendedBooks,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"books_li",key:e.title},[(0,n.Lk)("img",{src:e.image,class:"book_image"},null,8,ae),(0,n.Lk)("div",te,[(0,n.Lk)("div",ne,[(0,n.Lk)("p",re,[s[2]||(s[2]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(e.title),1)]),(0,n.Lk)("p",null,[s[3]||(s[3]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,h.v_)(e.published_date),1)]),(0,n.Lk)("div",le,[s[4]||(s[4]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{style:{"padding-right":"0.3rem"},key:s},[(0,n.Lk)("span",ie,(0,h.v_)(e.charAt(0)),1),(0,n.eW)((0,h.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",ce,[s[6]||(s[6]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories:")],-1)),e.categories.length>0?((0,n.uX)(),(0,n.CE)("ul",de,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"rcmnd_genre",style:{"background-color":"darkblue"},key:e},(0,h.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",ue,s[5]||(s[5]=[(0,n.Lk)("li",{style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])]),(0,n.Lk)("button",{class:"more_info",onClick:s=>r.more_info(e)},"More info",8,he)])])))),128))])):(0,n.Q3)("",!0),0==t.show_list?((0,n.uX)(),(0,n.CE)("div",ke,[(0,n.Lk)("div",_e,[(0,n.Lk)("img",{src:t.chosen_book.image,class:"chosen_book_image"},null,8,ge),(0,n.Lk)("div",pe,[(0,n.Lk)("p",null,[s[7]||(s[7]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(t.chosen_book.title),1)]),(0,n.Lk)("ul",be,[s[8]||(s[8]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.chosen_book?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{key:s},[(0,n.Lk)("span",we,(0,h.v_)(e.charAt(0)),1),(0,n.eW)((0,h.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("p",null,[s[9]||(s[9]=(0,n.Lk)("b",null,"Published Date: ",-1)),(0,n.eW)((0,h.v_)(t.chosen_book.published_date),1)]),t.chosen_book.categories.length>0?((0,n.uX)(),(0,n.CE)("ul",me,[s[10]||(s[10]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.chosen_book.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"chosen_genre",style:{"background-color":"grey"},key:e},(0,h.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",ve,s[11]||(s[11]=[(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1),(0,n.Lk)("li",{class:"chosen_genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)]))),(0,n.Lk)("p",null,[s[12]||(s[12]=(0,n.Lk)("b",null,"Description: ",-1)),(0,n.eW)((0,h.v_)(t.chosen_book.description),1)])])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)}var fe={data(){return{show_list:!0,chosen_book:null}},props:["recommendedBooks","isVisible","mediaType","mediaName"],watch:{isVisible(e){e&&(this.show_list=!0)}},methods:{close(){this.$emit("update:isVisible",!1)},more_info(e){this.show_list=!1,this.chosen_book=e},back(){this.show_list=!0}}};const ye=(0,i.A)(fe,[["render",Le]]);var Ce=ye,Pe={components:{RecommendModal:Ce},data(){return{query:"",mediaList:[],searchMedia:"Movies",show_ChosenMedia:!1,chosenMedia:null,currentPage:1,totalPages:1,showPageMultiplier:1,isModalVisible:!1,rcmndBooks:[]}},computed:{genreStore(){return Y()},page1(){return 4*this.showPageMultiplier-3},page2(){return 4*this.showPageMultiplier-2},page3(){return 4*this.showPageMultiplier-1},page4(){return 4*this.showPageMultiplier}},methods:{async search(e){if(this.show_ChosenMedia=!1,this.chosenMedia=null,1==e&&(this.currentPage=1,this.showPageMultiplier=1),"Movies"==this.searchMedia)try{const e=await fetch(`http://127.0.0.1:8000/search-movie/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.mediaList=s.movies||[],this.currentPage=s.current_page||1,this.totalPages=s.total_pages||1}catch(s){console.error("error catching data",s)}else if("TV Shows"==this.searchMedia)try{const e=await fetch(`http://127.0.0.1:8000/search-show/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.mediaList=s.shows||[],this.currentPage=s.current_page||1,this.totalPages=s.total_pages||1}catch(s){console.error("error catching data",s)}else if("Books"==this.searchMedia)try{const e=await fetch(`http://127.0.0.1:8000/search-book/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.mediaList=s.books||[],this.currentPage=s.current_page||1,this.totalPages=s.total_pages||1,console.log(s)}catch(s){console.error("error catching data",s)}},async recommendBooks(e){this.openModal();let s=new Map,o=[];if(null==e)return void alert("Select a media in order to get book recommendations.");if("Movies"==this.searchMedia||"TV Shows"==this.searchMedia){for(let s=0;s<e.genre_ids.length;s++)o.push(this.getGenreName(e.genre_ids[s]));s.set("title",e.title||e.name),s.set("description",e.overview),s.set("genre",o)}else"Books"==this.searchMedia&&(s.set("title",e.volumeInfo["title"]),s.set("description",e.volumeInfo["description"]),s.set("genre",e.volumeInfo["categories"]));let a=new URLSearchParams(s),t="http://127.0.0.1:8000/get-recommendations/?"+a.toString();try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fecth recommendations");const s=await e.json();this.rcmndBooks=s.recommendations||[]}catch(n){console.error("Error fecthing recommendations ",n)}},openModal(){this.isModalVisible=!0},toggleMedia(e){this.currentPage=1,this.showPageMultiplier=1,this.show_ChosenMedia=!1,this.searchMedia=e,this.mediaList=[],this.search(!0)},clearQuery(){this.currentPage=1,this.query="",this.mediaList=[],this.chosenMedia=null,this.show_ChosenMedia=!1,this.search(!0)},select(e){this.show_ChosenMedia=!0,this.chosenMedia=e,this.mediaList=[],this.query=e.title||e.name||e.volumeInfo["title"],this.currentPage=1},getGenreName(e){return this.genreStore.getGenreById(e)},getGenreColor(e){return this.genreStore.getGenreColorById(e)},changePage(e){this.currentPage=e,this.search(!1)},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.currentPage>this.page4&&this.showPageMultiplier++,this.search(!1))},prevPage(){this.page1==this.currentPage?(this.showPageMultiplier--,this.changePage(this.page4)):this.changePage(Number(this.currentPage)-1),this.search(!1)},redirectToLogin(){window.location.href="http://127.0.0.1:8000/login/"}},mounted(){this.search(!0)}};const Ee=(0,i.A)(Pe,[["render",H]]);var Fe=Ee;o(8111),o(2489),o(3579);const Me={class:"page_container"},Be={class:"dashboard_container"},Xe={class:"user_info"},Te={key:0,class:"user_info_list"},Oe={class:"user_info_li"},Ie={class:"user_info_div"},Ne=["placeholder","readonly"],Se={key:1,class:"change_div"},Ae={class:"user_info_li"},De={class:"user_info_div"},Ue=["placeholder","readonly"],We={key:1,class:"change_div"},Ge={class:"user_info_li"},xe={class:"user_info_div"},Qe=["placeholder","readonly"],Ve={key:1,class:"change_div"},je={key:1,class:"user_info_list"},Ke={class:"user_info_li"},Re={class:"user_password_div"},$e=["type"],Je={class:"user_info_li"},qe={class:"user_password_div"},He=["type"],Ye={class:"user_info_li"},ze={class:"user_password_div"},Ze=["type"],es={class:"password_btn_div"},ss={class:"genre_book_container"},os={class:"add_genre_container"},as={class:"genre_div"},ts={class:"user_genre_list"},ns={key:0,class:"user_genre",style:{"background-color":"grey"}},rs=["onClick"],ls={class:"add_book_container"},is={class:"genre_div"},cs={class:"favourite_book_ul"},ds=["src"],us={class:"favourite_books_li_container"},hs={class:"favourite_books_li_div"},ks={class:"favourite_book_div_title"},_s={class:"favourite_book_div_published"},gs={class:"favourite_books_li_authors"},ps={style:{fontWeight:"900"}},bs={class:"favourite_books_li_categories"},ws={key:0,class:"favourite_category_ul"},ms={key:1,class:"category_ul_modal"},vs=["onClick"],Ls={key:0,class:"genre_modal"},fs={class:"genre_modal_container"},ys={class:"genre_modal_div"},Cs={class:"add_genre_list"},Ps={key:0,class:"add_user_genre",style:{"background-color":"grey"}},Es=["onClick"],Fs={key:1,class:"genre_modal"},Ms={class:"book_modal_container"},Bs={class:"book_modal_container_header"},Xs={key:0,class:"books_ul"},Ts=["src"],Os={class:"books_li_container_modal"},Is={class:"books_li_div_modal"},Ns={class:"book_div_title_modal"},Ss={class:"book_div_published_modal"},As={class:"books_li_authors_modal"},Ds={style:{fontWeight:"900"}},Us={class:"books_li_categories_modal"},Ws={key:0,class:"category_ul_modal"},Gs={key:1,class:"category_ul_modal"},xs=["onClick"],Qs={class:"pagination_control_modal"},Vs=["disabled"],js=["disabled"],Ks=["disabled"],Rs=["disabled"],$s=["disabled"],Js=["disabled"],qs={key:1,class:"chosen_book_div_modal"},Hs={class:"chosen_book_container_modal"},Ys=["src"],zs={class:"chosen_book_div1_modal"},Zs={class:"chosen_book_authors"},eo={style:{fontWeight:"900"}},so={key:0,class:"chosen_genre_list"},oo={key:1,class:"chosen_genre_list"};function ao(e,s,o,t,r,l){return(0,n.uX)(),(0,n.CE)("div",Me,[s[71]||(s[71]=(0,n.Lk)("h1",null,"User Dashboard",-1)),(0,n.Lk)("div",Be,[(0,n.Lk)("div",Xe,[s[47]||(s[47]=(0,n.Lk)("h2",{class:"user_info_header"},"User Information",-1)),0==r.changePassword?((0,n.uX)(),(0,n.CE)("ul",Te,[(0,n.Lk)("li",Oe,[s[41]||(s[41]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Username")],-1)),(0,n.Lk)("div",Ie,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[0]||(s[0]=e=>r.user_data.username=e),placeholder:r.user_data.username,readonly:r.readUsername},null,8,Ne),[[a.Jo,r.user_data.username]]),1==r.readUsername?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"change_btn",onClick:s[1]||(s[1]=(...e)=>l.changeUsername&&l.changeUsername(...e))},"Change")):0==r.readUsername?((0,n.uX)(),(0,n.CE)("div",Se,[(0,n.Lk)("button",{onClick:s[2]||(s[2]=(...e)=>l.saveUsername&&l.saveUsername(...e)),class:"save_btn"},"Save"),(0,n.Lk)("button",{onClick:s[3]||(s[3]=(...e)=>l.cancelUsername&&l.cancelUsername(...e)),class:"cancel_btn"},"Cancel")])):(0,n.Q3)("",!0)])]),(0,n.Lk)("li",Ae,[s[42]||(s[42]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Online ID")],-1)),(0,n.Lk)("div",De,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[4]||(s[4]=e=>r.user_data.online_id=e),placeholder:r.user_data.online_id,readonly:r.readOnlineId},null,8,Ue),[[a.Jo,r.user_data.online_id]]),1==r.readOnlineId?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"change_btn",onClick:s[5]||(s[5]=(...e)=>l.changeOnlineId&&l.changeOnlineId(...e))},"Change")):0==r.readOnlineId?((0,n.uX)(),(0,n.CE)("div",We,[(0,n.Lk)("button",{onClick:s[6]||(s[6]=(...e)=>l.saveOnlineId&&l.saveOnlineId(...e)),class:"save_btn"},"Save"),(0,n.Lk)("button",{onClick:s[7]||(s[7]=(...e)=>l.cancelOnlineId&&l.cancelOnlineId(...e)),class:"cancel_btn"},"Cancel")])):(0,n.Q3)("",!0)])]),(0,n.Lk)("li",Ge,[s[43]||(s[43]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Date of Birth")],-1)),(0,n.Lk)("div",xe,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_date","onUpdate:modelValue":s[8]||(s[8]=e=>r.user_data.DOB=e),placeholder:r.user_data.DOB,type:"date",readonly:r.readDOB,max:"2020-01-01"},null,8,Qe),[[a.Jo,r.user_data.DOB]]),1==r.readDOB?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"change_btn",onClick:s[9]||(s[9]=(...e)=>l.changeDOB&&l.changeDOB(...e))},"Change")):0==r.readDOB?((0,n.uX)(),(0,n.CE)("div",Ve,[(0,n.Lk)("button",{onClick:s[10]||(s[10]=(...e)=>l.saveDOB&&l.saveDOB(...e)),class:"save_btn"},"Save"),(0,n.Lk)("button",{onClick:s[11]||(s[11]=(...e)=>l.cancelDOB&&l.cancelDOB(...e)),class:"cancel_btn"},"Cancel")])):(0,n.Q3)("",!0)])]),(0,n.Lk)("button",{class:"change_password_btn",onClick:s[12]||(s[12]=(...e)=>l.change_password&&l.change_password(...e))},"Change Password")])):(0,n.Q3)("",!0),1==r.changePassword?((0,n.uX)(),(0,n.CE)("ul",je,[(0,n.Lk)("li",Ke,[s[44]||(s[44]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Old Password")],-1)),(0,n.Lk)("div",Re,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[13]||(s[13]=e=>r.password_form.old_password=e),placeholder:"Enter Old Password",type:r.showOldPassword?"text":"password"},null,8,$e),[[a.hp,r.password_form.old_password]]),(0,n.Lk)("button",{class:"show_password_btn",onClick:s[14]||(s[14]=(...e)=>l.show_OldPassword&&l.show_OldPassword(...e))},(0,h.v_)(r.showOldPassword?"Hide":"Show"),1),(0,n.Lk)("button",{class:"clear_password_btn",onClick:s[15]||(s[15]=(...e)=>l.clearOldPassword&&l.clearOldPassword(...e))},"Clear")])]),(0,n.Lk)("li",Je,[s[45]||(s[45]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"New Password")],-1)),(0,n.Lk)("div",qe,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[16]||(s[16]=e=>r.password_form.new_password_1=e),placeholder:"Enter New Password",type:r.showNewPassword1?"text":"password"},null,8,He),[[a.hp,r.password_form.new_password_1]]),(0,n.Lk)("button",{class:"show_password_btn",onClick:s[17]||(s[17]=(...e)=>l.show_NewPassword1&&l.show_NewPassword1(...e))},(0,h.v_)(r.showNewPassword1?"Hide":"Show"),1),(0,n.Lk)("button",{class:"clear_password_btn",onClick:s[18]||(s[18]=(...e)=>l.clearNewPassword1&&l.clearNewPassword1(...e))},"Clear")])]),(0,n.Lk)("li",Ye,[s[46]||(s[46]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Confirm New Password")],-1)),(0,n.Lk)("div",ze,[(0,n.bo)((0,n.Lk)("input",{class:"user_info_div_input","onUpdate:modelValue":s[19]||(s[19]=e=>r.password_form.new_password_2=e),placeholder:"Re-enter New Password",type:r.showNewPassword2?"text":"password"},null,8,Ze),[[a.hp,r.password_form.new_password_2]]),(0,n.Lk)("button",{class:"show_password_btn",onClick:s[20]||(s[20]=(...e)=>l.show_NewPassword2&&l.show_NewPassword2(...e))},(0,h.v_)(r.showNewPassword2?"Hide":"Show"),1),(0,n.Lk)("button",{class:"clear_password_btn",onClick:s[21]||(s[21]=(...e)=>l.clearNewPassword2&&l.clearNewPassword2(...e))},"Clear")])]),(0,n.Lk)("div",es,[(0,n.Lk)("button",{onClick:s[22]||(s[22]=(...e)=>l.updatePassword&&l.updatePassword(...e)),class:"update_btn"},"Update Password"),(0,n.Lk)("button",{onClick:s[23]||(s[23]=(...e)=>l.cancelPassword&&l.cancelPassword(...e)),class:"cancel_password_btn"},"Cancel")])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ss,[(0,n.Lk)("div",os,[s[49]||(s[49]=(0,n.Lk)("h3",null,"Favourite Genres",-1)),(0,n.Lk)("div",as,[s[48]||(s[48]=(0,n.Lk)("p",null,"Your Genres:",-1)),(0,n.Lk)("button",{class:"add_genre_btn",onClick:s[24]||(s[24]=(...e)=>l.openGenreModal&&l.openGenreModal(...e))},"Add Genre")]),(0,n.Lk)("ul",ts,[0==r.user_data.favourite_genres.length?((0,n.uX)(),(0,n.CE)("li",ns,"No genres added yet")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.user_data.favourite_genres,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"user_genre",style:(0,h.Tr)({backgroundColor:e[1]})},[(0,n.eW)((0,h.v_)(e[0])+" ",1),(0,n.Lk)("button",{class:"delete_genre_btn",onClick:s=>l.deleteGenre(e[0])},"-",8,rs)],4)))),128))])]),(0,n.Lk)("div",ls,[s[56]||(s[56]=(0,n.Lk)("h3",null,"Favourite Books",-1)),(0,n.Lk)("div",is,[s[50]||(s[50]=(0,n.Lk)("p",null,"Your Books:",-1)),(0,n.Lk)("button",{class:"add_genre_btn",onClick:s[25]||(s[25]=(...e)=>l.openBookModal&&l.openBookModal(...e))},"Add Book")]),(0,n.Lk)("ul",cs,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.user_data.favourite_books,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"favourite_book_li",key:e},[(0,n.Lk)("img",{src:e?.image,class:"favourite_book_image"},null,8,ds),(0,n.Lk)("div",us,[(0,n.Lk)("div",hs,[(0,n.Lk)("p",ks,[s[51]||(s[51]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(e?.title),1)]),(0,n.Lk)("p",_s,[s[52]||(s[52]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,h.v_)(e?.published_date||"Not specified"),1)]),(0,n.Lk)("div",gs,[s[53]||(s[53]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{style:{"padding-right":"0.3rem"},key:s},[(0,n.Lk)("span",ps,(0,h.v_)(e.charAt(0)),1),(0,n.eW)((0,h.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",bs,[s[55]||(s[55]=(0,n.Lk)("p",{style:{"padding-right":"0.5rem"}},[(0,n.Lk)("b",null,"Categories:")],-1)),e?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",ws,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e?.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"rcmnd_genre_modal",style:{"background-color":"darkblue"},key:e},(0,h.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",ms,s[54]||(s[54]=[(0,n.Lk)("li",{class:"rcmnd_genre_modal",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])]),(0,n.Lk)("button",{class:"favourite_more_info",onClick:s=>l.moreInfo(e,!0)},"More info",8,vs)])])))),128))])])]),1==r.openAddGenre?((0,n.uX)(),(0,n.CE)("div",Ls,[(0,n.Lk)("div",fs,[s[58]||(s[58]=(0,n.Lk)("h4",null,"Add Genres",-1)),(0,n.Lk)("div",ys,[s[57]||(s[57]=(0,n.Lk)("p",null,"Choose from genres below",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":s[26]||(s[26]=e=>r.newGenreName=e),placeholder:"Enter your own genre",maxlength:"25"},null,512),[[a.Jo,r.newGenreName]]),(0,n.Lk)("button",{onClick:s[27]||(s[27]=(...e)=>l.addNewGenre&&l.addNewGenre(...e))},"Add")]),(0,n.Lk)("ul",Cs,[0==r.genreList.filter((e=>!r.user_data.favourite_genres.some((s=>s[0]===e[0])))).length?((0,n.uX)(),(0,n.CE)("li",Ps,"No more genres available to add")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.genreList.filter((e=>!r.user_data.favourite_genres.some((s=>s[0]===e[0])))),(e=>((0,n.uX)(),(0,n.CE)("li",{key:e[0],class:"add_user_genre",style:(0,h.Tr)({backgroundColor:e[1]})},[(0,n.eW)((0,h.v_)(e[0]),1),(0,n.Lk)("button",{onClick:s=>l.addGenre(e[0]),class:"add_existing_genre_btn"},"+",8,Es)],4)))),128))]),(0,n.Lk)("button",{onClick:s[28]||(s[28]=(...e)=>l.cancelAddGenre&&l.cancelAddGenre(...e)),class:"cancel_add_genre_btn"},"Exit")])])):(0,n.Q3)("",!0),1==r.openAddBook?((0,n.uX)(),(0,n.CE)("div",Fs,[(0,n.Lk)("div",Ms,[(0,n.Lk)("div",Bs,[s[59]||(s[59]=(0,n.Lk)("h4",null,"Add Books",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":s[29]||(s[29]=e=>r.query=e),onInput:s[30]||(s[30]=e=>l.searchBook(!0)),type:"text",placeholder:"Search Books - Trending Books"},null,544),[[a.Jo,r.query]]),(0,n.Lk)("button",{onClick:s[31]||(s[31]=(...e)=>l.clearQuery&&l.clearQuery(...e)),class:"clear_book_btn"},"Ã—"),0==r.showList?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"favourite_book_btn",onClick:s[32]||(s[32]=(...e)=>l.addFavouriteBook&&l.addFavouriteBook(...e))},"Add to Favourites")):(0,n.Q3)("",!0),0==r.showList?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"book_back_btn",onClick:s[33]||(s[33]=(...e)=>l.backToShowList&&l.backToShowList(...e))},"Back")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:s[34]||(s[34]=(...e)=>l.exitAddBook&&l.exitAddBook(...e)),class:"cancel_add_book_btn"},"Exit")]),1==r.showList?((0,n.uX)(),(0,n.CE)("ul",Xs,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.searchedBooks,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"books_li_modal",key:e.id},[(0,n.Lk)("img",{src:e.volumeInfo?.imageLinks?.thumbnail,class:"book_image_modal"},null,8,Ts),(0,n.Lk)("div",Os,[(0,n.Lk)("div",Is,[(0,n.Lk)("p",Ns,[s[60]||(s[60]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(e.volumeInfo?.title),1)]),(0,n.Lk)("p",Ss,[s[61]||(s[61]=(0,n.Lk)("b",null,"Published: ",-1)),(0,n.eW)((0,h.v_)(e.volumeInfo?.publishedDate||"Not specified"),1)]),(0,n.Lk)("div",As,[s[62]||(s[62]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.volumeInfo?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{style:{"padding-right":"0.3rem"},key:s},[(0,n.Lk)("span",Ds,(0,h.v_)(e.charAt(0)),1),(0,n.eW)((0,h.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("div",Us,[s[64]||(s[64]=(0,n.Lk)("p",{style:{"padding-right":"0.5rem"}},[(0,n.Lk)("b",null,"Categories:")],-1)),e.volumeInfo?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",Ws,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e?.volumeInfo?.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"rcmnd_genre_modal",style:{"background-color":"darkblue"},key:e},(0,h.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",Gs,s[63]||(s[63]=[(0,n.Lk)("li",{class:"rcmnd_genre_modal",style:{"background-color":"#9b9a9a"}},"Unknown",-1)])))])]),(0,n.Lk)("button",{class:"more_info_modal",onClick:s=>l.moreInfo(e,!1)},"Select",8,xs)])])))),128)),(0,n.Lk)("ul",Qs,[(0,n.Lk)("button",{class:"pagination_control_button_next_prev",disabled:1==this.currentPage,onClick:s[35]||(s[35]=(...e)=>l.prevPage&&l.prevPage(...e))},"<",8,Vs),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,h.Tr)({backgroundColor:this.currentPage==l.page1?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==l.page1?"bold":""}),disabled:l.page1>r.totalPages,onClick:s[36]||(s[36]=e=>l.changePage(l.page1))},(0,h.v_)(l.page1),13,js),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,h.Tr)({backgroundColor:this.currentPage==l.page2?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==l.page2?"bold":""}),disabled:l.page2>r.totalPages,onClick:s[37]||(s[37]=e=>l.changePage(l.page2))},(0,h.v_)(l.page2),13,Ks),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,h.Tr)({backgroundColor:this.currentPage==l.page3?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==l.page3?"bold":""}),disabled:l.page3>r.totalPages,onClick:s[38]||(s[38]=e=>l.changePage(l.page3))},(0,h.v_)(l.page3),13,Rs),(0,n.Lk)("button",{class:"pagination_control_button_page",style:(0,h.Tr)({backgroundColor:this.currentPage==l.page4?"#41ceaa":"#FBFFFE",fontWeight:this.currentPage==l.page4?"bold":""}),disabled:l.page4>r.totalPages,onClick:s[39]||(s[39]=e=>l.changePage(l.page4))},(0,h.v_)(l.page4),13,$s),(0,n.Lk)("button",{class:"pagination_control_button_next_prev",disabled:this.currentPage>=r.totalPages,onClick:s[40]||(s[40]=(...e)=>l.nextPage&&l.nextPage(...e))},">",8,Js)])])):0==r.showList?((0,n.uX)(),(0,n.CE)("div",qs,[(0,n.Lk)("div",Hs,[(0,n.Lk)("img",{src:r.chosen_book?.image,class:"chosen_book_image_modal"},null,8,Ys),(0,n.Lk)("div",zs,[(0,n.Lk)("p",null,[s[65]||(s[65]=(0,n.Lk)("b",null,"Title: ",-1)),(0,n.eW)((0,h.v_)(r.chosen_book?.title||"Title unavailable"),1)]),(0,n.Lk)("ul",Zs,[s[66]||(s[66]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Authors: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosen_book?.authors,((e,s)=>((0,n.uX)(),(0,n.CE)("li",{key:s},[(0,n.Lk)("span",eo,(0,h.v_)(e.charAt(0)),1),(0,n.eW)((0,h.v_)(e.slice(1)),1)])))),128))]),(0,n.Lk)("p",null,[s[67]||(s[67]=(0,n.Lk)("b",null,"Published Date: ",-1)),(0,n.eW)((0,h.v_)(r.chosen_book?.published_date),1)]),r.chosen_book?.categories?.length>0?((0,n.uX)(),(0,n.CE)("ul",so,[s[68]||(s[68]=(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.chosen_book?.categories,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"chosen_genre",style:{"background-color":"grey"},key:e},(0,h.v_)(e),1)))),128))])):((0,n.uX)(),(0,n.CE)("ul",oo,s[69]||(s[69]=[(0,n.Lk)("p",null,[(0,n.Lk)("b",null,"Categories: ")],-1),(0,n.Lk)("li",{class:"chosen_genre",style:{"background-color":"#9b9a9a"}},"Unknown",-1)]))),(0,n.Lk)("p",null,[s[70]||(s[70]=(0,n.Lk)("b",null,"Description: ",-1)),(0,n.eW)((0,h.v_)(r.chosen_book?.description),1)])])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)])])}const to=(0,t.nY)("userStore",{state:()=>({user_id:null,username:null,online_id:null,favourite_genres:[]}),actions:{setUser(e,s,o,a){this.user_id=e,this.username=s,this.online_id=o,this.favourite_genres=a,localStorage.setItem("user",JSON.stringify(this.$state))},loadUser(){const e=localStorage.getItem("user");if(e){const s=JSON.parse(e);this.user_id=s.user_id,this.username=s.username,this.online_id=s.online_id,this.favourite_genres=s.favourite_genres}},clearUser(){this.user_id=null,this.username=null,this.online_id=null,this.favourite_genres=[]}}});var no={name:"DashboardPage",data(){return{user_data:{favourite_genres:[]},password_form:{},csrfToken:"",readUsername:!0,readOnlineId:!0,readDOB:!0,changePassword:!1,showOldPassword:!1,showNewPassword1:!1,showNewPassword2:!1,openAddGenre:!1,openAddBook:!1,genreList:[],newGenreName:"",searchedBooks:[],query:"",currentPage:1,totalPages:1,showList:!0,chosen_book:{},showPageMultiplier:1}},computed:{page1(){return 4*this.showPageMultiplier-3},page2(){return 4*this.showPageMultiplier-2},page3(){return 4*this.showPageMultiplier-1},page4(){return 4*this.showPageMultiplier},userStore(){return to()}},methods:{async fetch_csrf_token(){try{const e=await fetch("http://127.0.0.1:8000/csrf/",{method:"GET",credentials:"include"});if(e.ok){const s=await e.json();this.csrfToken=s.csrfToken,console.log(`Fetched csrf token: ${this.csrfToken}`)}else console.log(`Failed to fetch token, ${e.statusText}`)}catch(e){console.error(`Error fetching token, ${e}`)}},async fetch_user(){try{const e=await fetch("http://127.0.0.1:8000/user/",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include"});if(e.ok){const s=await e.json();this.user_data=s,this.user_data.favourite_genres=s.favourite_genres,this.userStore.setUser(s.id,s.username,s.online_id,s.favourite_genres),console.log("Fetched user data")}}catch(e){console.error(`${e}`)}},async searchBook(e){this.showList=!0,this.chosen_book={},1==e&&(this.currentPage=1,this.showPageMultiplier=1);try{const e=await fetch(`http://127.0.0.1:8000/search-book/?title=${this.query}&page=${this.currentPage}`);if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.searchedBooks=s.books||[],this.currentPage=s.current_page||1,this.totalPages=s.total_pages||1,console.log(s)}catch(s){console.error("error catching data",s)}},backToShowList(){this.showList=!0,this.chosen_book={}},exitAddBook(){this.openAddBook=!1,this.clearQuery(),this.chosen_book={}},clearQuery(){this.query="",this.searchBook(!0)},changePage(e){this.currentPage=e,this.searchBook(!1)},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.currentPage>this.page4&&this.showPageMultiplier++,this.searchBook(!1))},prevPage(){this.page1==this.currentPage?(this.showPageMultiplier--,this.changePage(this.page4)):this.changePage(Number(this.currentPage)-1),this.searchBook(!1)},openBookModal(){this.openAddBook=!0,this.showList=!0},moreInfo(e,s){0==s?(this.chosen_book.image=e.volumeInfo?.imageLinks?.thumbnail,this.chosen_book.title=e.volumeInfo["title"],this.chosen_book.authors=e.volumeInfo["authors"],this.chosen_book.published_date=e.volumeInfo["publishedDate"]||"Not specified",this.chosen_book.categories=e.volumeInfo["categories"],this.chosen_book.description=e.volumeInfo["description"]):(this.chosen_book=e,this.openAddBook=!0),this.showList=!1},async addFavouriteBook(){try{const e=await fetch("http://127.0.0.1:8000/user/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({book:this.chosen_book,action:"add_book"}),credentials:"include"}),s=await e.json();if(!e.ok){if("Book is already added to favourites"!==s.error)throw new Error(`Failed to add book: ${e.status}`);alert("You have already added this book to your favourites")}this.fetch_user()}catch(e){console.error("Error adding book:",e)}},async saveUsername(){try{const e=await fetch("http://127.0.0.1:8000/user/",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include",body:JSON.stringify({username:this.user_data.username})});e.ok&&(console.log("Username updated successfully"),this.readUsername=!0)}catch(e){console.error("Error updating username:",e)}},changeUsername(){this.readUsername=!1,this.cancelOnlineId(),this.cancelDOB()},cancelUsername(){this.fetch_user(),this.readUsername=!0},async saveOnlineId(){try{const e=await fetch("http://127.0.0.1:8000/user/",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include",body:JSON.stringify({online_id:this.user_data.online_id})});e.ok&&(console.log("Online ID updated successfully"),this.readOnlineId=!0)}catch(e){console.error("Error updating online ID:",e)}},changeOnlineId(){this.readOnlineId=!1,this.cancelUsername(),this.cancelDOB()},cancelOnlineId(){this.fetch_user(),this.readOnlineId=!0},async saveDOB(){try{const e=await fetch("http://127.0.0.1:8000/user/",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include",body:JSON.stringify({DOB:this.user_data.DOB})});e.ok&&(console.log("DOB updated successfully"),this.readDOB=!0)}catch(e){console.error("Error updating DOB:",e)}},changeDOB(){this.readDOB=!1,this.cancelUsername(),this.cancelOnlineId()},cancelDOB(){this.fetch_user(),this.readDOB=!0},change_password(){this.cancelUsername(),this.cancelOnlineId(),this.cancelDOB(),this.changePassword=!0},cancelPassword(){this.password_form.old_password="",this.password_form.new_password_1="",this.password_form.new_password_2="",this.changePassword=!1},async updatePassword(){try{const e=await fetch("http://127.0.0.1:8000/user/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include",body:JSON.stringify({action:"change_password",old_password:this.password_form.old_password,new_password1:this.password_form.new_password_1,new_password2:this.password_form.new_password_2})}),s=await e.json();if(!e.ok){let e=Object.values(s.errors||{}).flat().join("\n");throw new Error(e||"Unexpected error occured when changing password")}this.cancelPassword()}catch(e){console.error("Error:",e),alert(e)}},show_OldPassword(){this.showOldPassword=!this.showOldPassword},show_NewPassword1(){this.showNewPassword1=!this.showNewPassword1},show_NewPassword2(){this.showNewPassword2=!this.showNewPassword2},clearOldPassword(){this.password_form.old_password=""},clearNewPassword1(){this.password_form.new_password_1=""},clearNewPassword2(){this.password_form.new_password_2=""},openGenreModal(){this.openAddGenre=!0},async deleteGenre(e){try{const s=await fetch("http://127.0.0.1:8000/user/",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({genre_name:e,action:"delete_genre"}),credentials:"include"});if(!s.ok)throw new Error(`Failed to remove genre: ${s.status}`);this.fetch_user()}catch(s){console.error("Error removing genre:",s)}},async addGenre(e){try{const s=await fetch("http://127.0.0.1:8000/user/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({genre_name:e,action:"add_genre"}),credentials:"include"});if(!s.ok)throw new Error(`Failed to add genre: ${s.status}`);this.fetch_user()}catch(s){console.error("Error adding genre:",s)}},async addNewGenre(){if(this.newGenreName&&0!=this.newGenreName.trim().length)try{const e=await fetch("http://127.0.0.1:8000/genre/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},body:JSON.stringify({genre_name:this.newGenreName}),credentials:"include"});if(!e.ok)throw new Error(`Failed to add new genre: ${e.status}`);let s=await e.json(),o=s.genre_name;this.addGenre(o),this.newGenreName="",this.fetch_user(),this.fetch_genres()}catch(e){console.error("Error adding new genre:",e),alert("Error:"+e.message)}else alert("Please provide a new genre name")},async fetch_genres(){try{const e=await fetch("http://127.0.0.1:8000/genre/",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.csrfToken},credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch genres: ${e.status}`);this.genreList=await e.json()}catch(e){console.error("Error fetching genres:",e)}},cancelAddGenre(){this.openAddGenre=!1}},async mounted(){await this.fetch_csrf_token(),this.fetch_user(),this.fetch_genres(),this.searchBook()}};const ro=(0,i.A)(no,[["render",ao]]);var lo=ro;const io=[{path:"/",name:"Main Page",component:Fe},{path:"/dashboard",name:"Dashboard Page",component:lo}],co=(0,u.aE)({history:(0,u.LA)(),routes:io});var uo=co;const ho=(0,a.Ef)(d),ko=(0,t.Ey)();ho.use(uo),ho.use(ko),ho.mount("#app")}},s={};function o(a){var t=s[a];if(void 0!==t)return t.exports;var n=s[a]={exports:{}};return e[a].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(s,a,t,n){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],t=e[d][1],n=e[d][2];for(var l=!0,i=0;i<a.length;i++)(!1&n||r>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(l=!1,n<r&&(r=n));if(l){e.splice(d--,1);var c=t();void 0!==c&&(s=c)}}return s}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,t,n]}}(),function(){o.d=function(e,s){for(var a in s)o.o(s,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={524:0};o.O.j=function(s){return 0===e[s]};var s=function(s,a){var t,n,r=a[0],l=a[1],i=a[2],c=0;if(r.some((function(s){return 0!==e[s]}))){for(t in l)o.o(l,t)&&(o.m[t]=l[t]);if(i)var d=i(o)}for(s&&s(a);c<r.length;c++)n=r[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(591)}));a=o.O(a)})();
//# sourceMappingURL=app.80b429a0.js.map